openapi: 3.0.3 
info:
  title: Open CMS API
  version: 3.2.6
  description: |
    Unified OpenCMS API Reference. Modules: Authentication, Card Lifecycle, Card Inquiry,
    Card Details, Card Limits, Products, Block Rules, Channel Preferences, and Card Status.

servers:
  - url: https://api.opencms.paysyslabs.com
    description: Production
  - url:  http://10.6.60.12:8088
    description: UAT

tags:
  - name: Authentication
    description: |
      Authentication APIs are used to obtain and manage the X-Auth-Token that secures
      all subsequent Open CMS calls. Typically used by channels, middleware, and
      partner systems at the start of an integration session.
  - name: Card Lifecycle
    description: |
      Card Lifecycle APIs manage the end-to-end journey of a card: activation,
      PIN generation or change, and new card issuance (including virtual where
      enabled at product level). These services are usually invoked by IVR,
      digital channels, and back-office operations.
  - name: Card Inquiry
    description: |
      Card Inquiry APIs provide high-level views on a customerâ€™s portfolio of cards.
      They are used to fetch card lists against a customer identifier, or to reveal
      sensitive details (such as full card number and CVC) with appropriate controls
      for servicing and digital channels.
  - name: Card Details
    description: |
      Card Details APIs expose a detailed, read-only profile of an individual card:
      status, masked number, expiry, and key servicing attributes. They are typically
      used by mobile apps, customer portals, and call centers to show the latest
      state of a specific card.
  - name: Card Limits
    description: |
      Card Limits APIs configure and retrieve transactional limits for a card across
      channels and transaction types. These services support daily and cycle limits,
      per-transaction thresholds, and are used to enforce customer-level and
      product-level risk policies.
  - name: Products
    description: |
      Product APIs return eligible card products for a given customer and use case
      (issuance or renewal). They are commonly used by account origination flows,
      digital onboarding journeys, and branch systems when recommending or issuing
      new cards.
  - name: Block Rules
    description: |
      Block Rules APIs manage country and MCC level controls for a card. They enable
      the bank to configure where and how a card can be used, supporting risk and
      compliance policies such as geo-blocking and merchant category restrictions.
  - name: Channel Preferences
    description: |
      Channel Preferences APIs manage per-channel enablement of a card for domestic
      and international usage across ATM, POS, and Online. They are typically consumed
      by self-service channels and operations teams to toggle usage safely.
  - name: Card Status
    description: |
      Card Status APIs update the operational status of a card (for example active,
      blocked, hot-listed). These services are usually invoked by IVR, mobile apps,
      dispute flows, and back-office staff in response to customer requests or risk
      events.

x-tagGroups:
  - name: API
    tags:
      - Authentication
      - Card Lifecycle
      - Card Inquiry
      - Card Details
      - Card Limits
      - Products
      - Block Rules
      - Channel Preferences
      - Card Status

security:
  - XAuthToken: []

components:
  securitySchemes:
    XAuthToken:
      type: apiKey
      in: header
      name: X-Auth-Token
      description: Token returned by /api/v1/authenticate.

  parameters:
    XAuthTokenHeader:
      in: header
      name: X-Auth-Token
      required: true
      description: Token returned by /api/v1/authenticate.
      schema:
        type: string
        minLength: 16
    RrnParam:
      in: path
      name: rrn
      required: true
      description: Retrieval Reference Number.
      schema:
        type: string
        minLength: 6
        maxLength: 32

  schemas:
    # ---- Typed primitives
    IdType:
      type: string
      description: Customer identifier type.
      enum: [CNIC, NIN, PASSPORT, ACCOUNT, MOBILE, NICOP, NTN]
      example: CNIC
    IdValue:
      type: string
      minLength: 5
      maxLength: 32
      example: "4220142163583"
    RRN:
      type: string
      minLength: 6
      maxLength: 32
      example: "21212121232"

    # ---- Common envelopes
    StandardResponse:
      type: object
      required: [responseCode, responseDescription]
      properties:
        responseCode:
          type: string
          description: "00=success; non-00=error"
          example: "00"
        responseDescription:
          type: string
          example: "Processed OK"
        data:
          nullable: true
          type: object
          additionalProperties: true
        message:
          type: string
        timeStamp:
          type: string

    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                status:
                  type: integer
                  example: 401
                error:
                  type: string
                  example: "Unauthorized"

    # ---- Authentication
    AuthRequest:
      type: object
      required: [username, password]
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 64
          example: "partner_user"
        password:
          type: string
          minLength: 8
          maxLength: 128
          example: "s3cr3t#Key"

    AuthSuccess:
      type: object
      required: [token, expiry]
      properties:
        token:
          type: string
          description: JWT containing token
          example: "57d49e70-65f4-43b5-aaa8-fde8125d79a6"
        expiry:
          type: string
          description: Expiry time in epoch
          example: "1737620181064"

    # ---- Card Inquiry & Details (items + responses)
    CustomerCardItem:
      type: object
      properties:
        cardId:
          type: integer
          example: 202
        cardNumber:
          type: string
          example: "22058*****000269"
        cardStatus:
          type: string
          example: "Fresh"
        cardStatusCode:
          type: string
          example: "00"
        accountNumber:
          type: string
          example: "7776790190029"
        accountName:
          type: string
          example: "Megan"
        accountStatus:
          type: string
          example: "Active"
        productCode:
          type: string
          example: "18"
        productName:
          type: string
          example: "PayPak Pink Cards"
        request:
          type: object
          properties:
            recordId:
              type: integer
              example: 398
            status:
              type: string
              example: "In Process"
            statusCode:
              type: string
              example: "02"
            description:
              type: string
              example: "P"

    CardListResponse:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                cardList:
                  type: array
                  items:
                    $ref: '#/components/schemas/CustomerCardItem'

    RevealCardDetailsSuccess:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                cardNumber:
                  type: string
                  example: "2205820000022467"
                cvc:
                  type: string
                  example: "**5"
                expiry:
                  type: string
                  example: "3009"

    CardDetailsSuccess:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                cardId:
                  type: string
                  example: "7"
                createdDate:
                  type: string
                  example: "2020-05-21 11:45:59.414"
                cardName:
                  type: string
                  example: "SHAHZAD YOUSUF"
                cardstatus:
                  type: string
                  example: "Active"
                expirydate:
                  type: string
                  example: "2505"
                maskedcardnumber:
                  type: string
                  example: "22058*****000053"

    # ---- Card Lifecycle
    ActivateCardRequest:
      type: object
      required: [idType, idValue, channel, cardId, pin, format, transactionDate]
      properties:
        accountNumber:
          type: string
          example: "73264"
        idType:
          $ref: '#/components/schemas/IdType'
        idValue:
          $ref: '#/components/schemas/IdValue'
        channel:
          type: string
          description: '"003"=IVR; "004"=Digital'
          enum: ["003", "004"]
          example: "004"
        cardId:
          type: integer
          example: 3
          description: Required for internal PIN block generation
        oldPin:
          type: string
          nullable: true
          description: RSA 2048 + PKCS#1 v1.5 + Base64 when changing PIN (cms_public-key.pem)
        pin:
          type: string
          description: RSA 2048 + PKCS#1 v1.5 + Base64 (cms_public-key.pem)
          example: "BASE64ENC_PIN"
        cardExpiry:
          type: string
          description: YYMM (optional)
          pattern: '^\d{4}$'
          example: "2509"
        rrn:
          $ref: '#/components/schemas/RRN'
        narration:
          type: string
          example: "Mobile"
        format:
          type: string
          minLength: 2
          maxLength: 2
          example: "01"
        transactionDate:
          type: string
          format: date-time
          example: "2025-02-27T07:15:50.408Z"

    # ---- Card Limits
    SetLimitsProcessedItem:
      type: object
      properties:
        cycleLimit:
          type: integer
          example: 300000
        transactionType:
          type: string
          example: "Cash Withdrawal"
        channelCode:
          type: string
          example: "ATM-OnUs"
        limitPerTransaction:
          type: integer
          example: 20000
        limitCycleName:
          type: string
          example: "Daily"
        currency:
          type: string
          example: "PKR"
        effectiveDate:
          type: string
          example: "2025-03-01T05:11:19.360+0000"
        endDate:
          type: string
          nullable: true
        status:
          type: string
          example: "ACTIVE"
        responseCode:
          type: string
          example: "00"
        responseMessage:
          type: string
          example: "Processed OK"

    SetLimitsSuccess:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                idValue:
                  $ref: '#/components/schemas/IdValue'
                cardId:
                  type: integer
                  example: 190
                processedDetails:
                  type: array
                  items:
                    $ref: '#/components/schemas/SetLimitsProcessedItem'

    CardLimitItem:
      type: object
      properties:
        status:
          type: string
          example: "ACTIVE"
        channelName:
          type: string
          example: "ATM-OnUs"
        transactionName:
          type: string
          example: "Cash Withdrawal"
        allowedMaxLimit:
          type: number
          example: 175000
        allowedLimit:
          type: number
          example: 175000
        usedLimit:
          type: number
          example: 0
        availableLimit:
          type: number
          example: 175000
        currency:
          type: string
          example: "PKR"
        limitCycle:
          type: string
          example: "Daily"
        frequency:
          type: integer
          example: 20
        limitPerTransaction:
          type: integer
          example: 25000

    LimitsSuccess:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                cardLimits:
                  type: array
                  items:
                    $ref: '#/components/schemas/CardLimitItem'

    # ---- Channel Preferences (doc shape)
    ChannelPreferencesDocResponse:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                channels:
                  type: object
                  properties:
                    ATM:
                      type: object
                      properties:
                        domestic:
                          type: boolean
                        international:
                          type: boolean
                    POS:
                      type: object
                      properties:
                        domestic:
                          type: boolean
                        international:
                          type: boolean
                    Online:
                      type: object
                      properties:
                        domestic:
                          type: boolean
                        international:
                          type: boolean

    # ---- Products request (preserve doc shape option)
    ProductListRequest:
      type: object
      required: [accountType, action, IdValue, IdType, rrn]
      properties:
        accountType:
          type: string
          description: Optional account type context.
          enum: [CURRENT, SAVINGS]
          example: CURRENT
        action:
          type: string
          enum: [issuance, renewal, Issuance, Renewal]
          example: issuance
        IdValue:
          type: string
          description: Value of the UID Type (casing per document)
        IdType:
          type: string
          description: CNIC, Passport, NICOP, NTN (casing per document)
        rrn:
          $ref: '#/components/schemas/RRN'

    # ---- Block Rules
    CardBlockRulesGetRequest:
      type: object
      required: [cardId, type, rrn]
      properties:
        cardId:
          type: integer
          example: 3
        type:
          type: string
          enum: [ALL, COUNTRYCODE, MCCODE]
          example: "ALL"
        rrn:
          $ref: '#/components/schemas/RRN'

    CountryCodeRule:
      type: object
      required: [countryAlpha3Code, status]
      properties:
        countryName:
          type: string
          example: "Argentina"
        countryAlpha3Code:
          type: string
          example: "ARG"
        effectiveDate:
          type: string
          format: date-time
          example: "2025-06-03T07:54:21.445Z"
        endDate:
          type: string
          format: date-time
          example: "2025-07-03T07:54:21.445Z"
        numericCode:
          type: string
          example: "032"
        status:
          type: string
          enum: ["ACTIVE", "INACTIVE"]
          example: "ACTIVE"

    MccRule:
      type: object
      required: [code, status]
      properties:
        code:
          type: string
          example: "4111"
        type:
          type: string
          example: "Transportation"
        effectiveDate:
          type: string
          format: date-time
          example: "2025-06-03T07:54:21.445Z"
        endDate:
          type: string
          format: date-time
          example: "2025-07-03T07:54:21.445Z"
        status:
          type: string
          enum: ["ACTIVE", "INACTIVE"]
          example: "ACTIVE"

    CardBlockRulesUpdateRequest:
      type: object
      required: [cardId, rrn]
      properties:
        cardId:
          type: integer
          example: 3
        countryCodes:
          type: array
          items:
            $ref: '#/components/schemas/CountryCodeRule'
        mcc:
          type: array
          items:
            $ref: '#/components/schemas/MccRule'
        rrn:
          $ref: '#/components/schemas/RRN'

    # ---- Helper: accept cardId as string of digits everywhere
    CardIdStringDigits:
      type: string
      pattern: '^\d+$'
      example: "190"

    # ---- Create Card (full doc shape)
    CreateCardRequest:
      type: object
      required:
        - accountNumber
        - applicationType
        - cardTitle
        - cardtype
        - cell
        - city
        - dateOfBirth
        - email
        - fatherHusbandName
        - firstname
        - gender
        - idType
        - idValue
        - lastname
        - mailingAddress
        - motherMaidenName
        - nationalityCode
        - productCode
      properties:
        accountNumber:
          type: string
          example: "1271999964444"
        applicationType:
          type: string
          enum: ["New", "Replacement"]
          example: "New"
        cardTitle:
          type: string
          example: "MR"
        cardtype:
          type: string
          description: '"1"=Primary, "2"=Supplementary'
          enum: ["1", "2"]
          example: "1"
        cell:
          type: string
          example: "03212479011"
        city:
          type: string
          example: "khi"
        companyName:
          type: string
          nullable: true
          example: "Paysys Labs"
        dateOfBirth:
          type: string
          description: DDMMYYYY as per doc examples
          example: "23062000"
        email:
          type: string
          format: email
          example: "test@gmail.com"
        fatherHusbandName:
          type: string
          example: "Muhammad Ali"
        firstname:
          type: string
          example: "Ahmed"
        gender:
          type: string
          example: "Male"
        homeAddress:
          type: string
          nullable: true
        homePhone:
          type: string
          nullable: true
        idType:
          type: string
          enum: [CNIC, Passport, NICOP, NTN]
          example: "CNIC"
        idValue:
          $ref: '#/components/schemas/IdValue'
        lastname:
          type: string
          example: "Khan"
        mailingAddress:
          type: string
          example: "House 1, Street 2, Karachi"
        motherMaidenName:
          type: string
          example: "Ayesha"
        nationalityCode:
          type: string
          example: "PK"
        officeAddress:
          type: string
          nullable: true
        officePhone:
          type: string
          nullable: true
        primaryCardIdentityValue:
          type: string
          nullable: true
          example: "4216589745314"
        productCode:
          type: string
          example: "1206"
        profession:
          type: string
          nullable: true
          example: "QA"
        relation:
          type: string
          nullable: true
          example: "self"
        replacementReason:
          type: string
          nullable: true
          description: "1=New, 2=Lost, 3=Stolen, 4=Damaged"
          enum: ["1", "2", "3", "4"]
        rrn:
          $ref: '#/components/schemas/RRN'
        branchCode:
          type: string
          nullable: true
        branchAddress:
          type: string
          nullable: true

    CreateCardSuccess:
      allOf:
        - $ref: '#/components/schemas/StandardResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                trackingId:
                  type: string
                  description: Tracking id for the card request
                  example: "bc4eec2f-eda2-4821-a0aa-dbb92bcfa50a"

paths:

  # ---------------- Authentication ----------------
  /api/v1/authenticate:
    post:
      tags: [Authentication]
      summary: Authenticate
      description: The service allowed to authenticate.
      security: []
      parameters:
        - in: header
          name: X-Auth-Username
          required: true
          schema:
            type: string
            minLength: 3
            maxLength: 64
        - in: header
          name: X-Auth-Password
          required: true
          schema:
            type: string
            minLength: 8
            maxLength: 128
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthRequest'
            examples:
              body:
                value:
                  username: "partner_user"
                  password: "s3cr3t#Key"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/StandardResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AuthSuccess'
        "401":
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Card Lifecycle ----------------
  /api/v1/management/activateCard:
    post:
      tags: [Card Lifecycle]
      summary: Activate / Generate PIN / Change PIN

      # description: Uses RSA (2048, PKCS#1 v1.5) with Base64 for `pin` and `oldPin`. `"003"` = IVR; `"004"` = Digital. Public key file: cms_public-key.pem
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ActivateCardRequest'
            example:
              accountNumber: "73264"
              idType: "CNIC"
              idValue: "4200008716115"
              channel: "004"
              cardId: 3
              pin: "BASE64ENC_PIN"
              cardExpiry: "2509"
              rrn: "200507160418"
              narration: "Mobile"
              format: "01"
              transactionDate: "2025-02-27T07:15:50.408Z"
      responses:
        "200":
          description: Processed OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/Card/createCard:
    post:
      tags: [Card Lifecycle]
      summary: Create / Issue Card (supports virtual per product settings)
      description: Creates a card request. Aligns with documented field set; `rrn` optional.
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCardRequest'
            example:
              accountNumber: "1271999964444"
              applicationType: "New"
              cardTitle: "MR"
              cardtype: "1"
              cell: "03212479011"
              city: "khi"
              companyName: "Paysys Labs"
              dateOfBirth: "23062000"
              email: "test@gmail.com"
              fatherHusbandName: "Muhammad Ali"
              firstname: "Ahmed"
              gender: "Male"
              homeAddress: "Street 1"
              idType: "CNIC"
              idValue: "4216589745314"
              lastname: "Khan"
              mailingAddress: "House 1, Karachi"
              motherMaidenName: "Ayesha"
              nationalityCode: "PK"
              officeAddress: "Office XYZ"
              primaryCardIdentityValue: "4216589745314"
              productCode: "1206"
              profession: "QA"
              relation: "self"
              rrn: "21212121232"
      responses:
        "200":
          description: Card request parked for embossing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateCardSuccess'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Card Inquiry ----------------
  /getCardsByCustomer/{idValue}/{rrn}:
    get:
      tags: [Card Inquiry]
      summary: Get Customer Cards
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
        - in: path
          name: idValue
          required: true
          schema:
            $ref: '#/components/schemas/IdValue'
        - $ref: '#/components/parameters/RrnParam'
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardListResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/Card/revealCardDetail:
    post:
      tags: [Card Inquiry]
      summary: Reveal Card Details
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [cardId, idValue, rrn]
              properties:
                cardId:
                  type: string
                  example: "441487"
                idValue:
                  $ref: '#/components/schemas/IdValue'
                rrn:
                  $ref: '#/components/schemas/RRN'
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RevealCardDetailsSuccess'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Card Details ----------------
  /getCardDetails/{idValue}/{cardId}/{rrn}:
    get:
      tags: [Card Details]
      summary: Get Card Details
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
        - in: path
          name: idValue
          required: true
          schema:
            $ref: '#/components/schemas/IdValue'
        - in: path
          name: cardId
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/RrnParam'
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CardDetailsSuccess'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Card Limits ----------------
  /updateCustomerCardLimits:
    post:
      tags: [Card Limits]
      summary: Set Customer Card Limits
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [cardId, idValue, rrn, limitDetails]
              properties:
                cardId:
                  $ref: '#/components/schemas/CardIdStringDigits'
                idValue:
                  $ref: '#/components/schemas/IdValue'
                rrn:
                  $ref: '#/components/schemas/RRN'
                limitDetails:
                  type: array
                  items:
                    type: object
                    required: [channelCode, currency, limitCycleName, limitPerTransaction, status, transactionType]
                    properties:
                      channelCode:
                        type: string
                        example: "ATM-OnUs"
                      currency:
                        type: string
                        example: "PKR"
                      cycleLimit:
                        type: integer
                        example: 300000
                      effectiveDate:
                        type: string
                        nullable: true
                      endDate:
                        type: string
                        nullable: true
                      limitCycleName:
                        type: string
                        example: "Daily"
                      limitPerTransaction:
                        type: integer
                        example: 30000
                      status:
                        type: string
                        enum: ["ACTIVE", "INACTIVE"]
                        example: "ACTIVE"
                      transactionType:
                        type: string
                        example: "Cash Withdrawal"
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SetLimitsSuccess'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /customerCardLimits/{idValue}/{cardId}/{rrn}:
    get:
      tags: [Card Limits]
      summary: Get Customer Card Limits
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
        - in: path
          name: idValue
          required: true
          schema:
            $ref: '#/components/schemas/IdValue'
        - in: path
          name: cardId
          required: true
          schema:
            $ref: '#/components/schemas/CardIdStringDigits'
        - $ref: '#/components/parameters/RrnParam'
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LimitsSuccess'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Products ----------------
  /productList:
    post:
      tags: [Products]
      summary: Get All Product List
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductListRequest'
            example:
              accountType: "CURRENT"
              action: "issuance"
              IdValue: "4220142163583"
              IdType: "CNIC"
              rrn: "21212121232"
      responses:
        "200":
          description: Successful operation (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Block Rules ----------------
  /getCardBlockRules:
    post:
      tags: [Block Rules]
      summary: Get Card Block Rules
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardBlockRulesGetRequest'
            example:
              cardId: 3
              type: "ALL"
              rrn: "21212121232"
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /updateCardBlockRules:
    post:
      tags: [Block Rules]
      summary: Update Card Block Rules
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CardBlockRulesUpdateRequest'
            example:
              cardId: 3
              rrn: "21212121232"
              countryCodes:
                - countryAlpha3Code: "ARG"
                  effectiveDate: "2025-06-03T07:54:21.445Z"
                  endDate: "2025-07-03T07:54:21.445Z"
                  status: "ACTIVE"
              mcc:
                - code: "4111"
                  effectiveDate: "2025-06-03T07:54:21.445Z"
                  endDate: "2025-07-03T07:54:21.445Z"
                  status: "ACTIVE"
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Channel Preferences ----------------
  /api/v1/cardApi/channelPreferences:
    post:
      tags: [Channel Preferences]
      summary: Customer Channel Preferences (List)
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [identificationValue, cardId]
              properties:
                identificationValue:
                  type: string
                  example: "4130212321111"
                cardId:
                  type: string
                  example: "01"
                rrn:
                  $ref: '#/components/schemas/RRN'
      responses:
        "200":
          description: OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChannelPreferencesDocResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/cardApi/updateChannelPreference:
    post:
      tags: [Channel Preferences]
      summary: Update Customer Channel Preferences
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [cardId, identificationValue, preferences]
              properties:
                cardId:
                  type: string
                identificationValue:
                  type: string
                rrn:
                  $ref: '#/components/schemas/RRN'
                preferences:
                  type: object
                  properties:
                    ATM:
                      type: object
                      properties:
                        international:
                          type: boolean
                        domestic:
                          type: boolean
                    POS:
                      type: object
                      properties:
                        international:
                          type: boolean
                        domestic:
                          type: boolean
                    Online:
                      type: object
                      properties:
                        international:
                          type: boolean
                        domestic:
                          type: boolean
      responses:
        "200":
          description: Processed OK (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ---------------- Card Status ----------------
  /setCardStatus:
    post:
      tags: [Card Status]
      summary: Set Card Status
      parameters:
        - $ref: '#/components/parameters/XAuthTokenHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [cardId, idValue, status, rrn]
              properties:
                cardId:
                  type: string
                  example: "3"
                idValue:
                  $ref: '#/components/schemas/IdValue'
                status:
                  type: string
                  example: "01"
                  description: Card status key
                rrn:
                  $ref: '#/components/schemas/RRN'
      responses:
        "200":
          description: Card status updated (domain codes in body)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StandardResponse'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
