"use strict";(globalThis.webpackChunkopen_cms_paysyslabs=globalThis.webpackChunkopen_cms_paysyslabs||[]).push([[927],{4445:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"developerWorkflow","title":"Developer Workflow","description":"Integrate with OpenCMS API for card lifecycle management, authentication, inquiries, limits, and preferences.","source":"@site/docs/developerWorkflow.md","sourceDirName":".","slug":"/developerWorkflow","permalink":"/opencms-api-specs/docs/developerWorkflow","draft":false,"unlisted":false,"editUrl":"https://github.com/uneebae/opencms-api-specs/tree/main/docs/developerWorkflow.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/opencms-api-specs/docs/introduction"},"next":{"title":"Data Type References","permalink":"/opencms-api-specs/docs/dataTypeRef"}}');var t=n(4848),d=n(8453);const c={},a="Developer Workflow",i={},l=[{value:"1 Authentication",id:"1-authentication",level:2},{value:"2 Card Lifecycle (Create \u2192 Activate)",id:"2-card-lifecycle-create--activate",level:2},{value:"A. Create Card",id:"a-create-card",level:3},{value:"B. Activate Card / Generate PIN",id:"b-activate-card--generate-pin",level:3},{value:"4 Card Limits",id:"4-card-limits",level:2},{value:"Update Rules",id:"update-rules",level:3},{value:"Workflow Summary",id:"workflow-summary",level:2}];function o(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"developer-workflow",children:"Developer Workflow"})}),"\n",(0,t.jsx)(r.p,{children:"Integrate with OpenCMS API for card lifecycle management, authentication, inquiries, limits, and preferences."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"1-authentication",children:"1 Authentication"}),"\n",(0,t.jsx)(r.p,{children:"Obtain a JWT token to authorize all API requests."}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Endpoint:"})," ",(0,t.jsx)(r.code,{children:"POST /api/v1/authenticate"})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Request:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n  "username": "partner_user",\r\n  "password": "s3cr3t#Key"\r\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Response:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",\r\n  "expiry": "1737620181064"\r\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Header for all requests:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"X-Auth-Token: eyJhbGciOiJI...\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"2-card-lifecycle-create--activate",children:"2 Card Lifecycle (Create \u2192 Activate)"}),"\n",(0,t.jsx)(r.h3,{id:"a-create-card",children:"A. Create Card"}),"\n",(0,t.jsxs)(r.p,{children:["Issue a physical or virtual card using ",(0,t.jsx)(r.code,{children:"/api/v1/Card/create"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Request:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n  "idValue": "4220142163583",\r\n  "idType": "CNIC",\r\n  "productCode": "DEBIT001",\r\n  "embossName": "MEGAN ROSS",\r\n  "virtual": true,\r\n  "idempotencyKey": "f0d32e10-91d7-4029-8ad3-1a70b8c93d7a",\r\n  "rrn": "21212121232"\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"b-activate-card--generate-pin",children:"B. Activate Card / Generate PIN"}),"\n",(0,t.jsxs)(r.p,{children:["Activate the card using ",(0,t.jsx)(r.code,{children:"/activateCard"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Request:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n  "idType": "CNIC",\r\n  "idValue": "4220142163583",\r\n  "format": "01",\r\n  "pin": "BASE64ENC_PIN",\r\n  "rrn": "21212121232",\r\n  "transactionDate": "2025-01-21T05:06:14.875Z"\r\n}\r\n```---\r\n\r\n## 3 Card Inquiry\r\n\r\nRetrieve all cards linked to a customer using `/getCardsByCustomer`.\r\n\r\n**Endpoint:** `GET /getCardsByCustomer/{idValue}/{rrn}`\r\n\r\n**Response:**\r\n```json\r\n{\r\n  "responseCode": "00",\r\n  "responseDescription": "OK",\r\n  "data": {\r\n    "cardList": [\r\n      {\r\n        "cardId": 202,\r\n        "cardNumber": "22058*****000269",\r\n        "cardStatus": "Fresh",\r\n        "productName": "PayPak Pink Cards"\r\n      }\r\n    ]\r\n  }\r\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"4-card-limits",children:"4 Card Limits"}),"\n",(0,t.jsxs)(r.p,{children:["Set or update card transaction limits using ",(0,t.jsx)(r.code,{children:"/setCustomerCardLimits"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Request:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n  "idType": "CNIC",\r\n  "idValue": "4220142163583",\r\n  "dailyLimit": 50000,\r\n  "perTxnLimit": 20000,\r\n  "channel": "ECOM",\r\n  "rrn": "21212121232"\r\n}\r\n```---\r\n\r\n## 5 Block Rules\r\n\r\n### Get Rules\r\n\r\nRetrieve card block rules using `/getCardBlockRules`.\r\n\r\n**Request:**\r\n```json\r\n{\r\n  "cardId": 3,\r\n  "type": "ALL",\r\n  "rrn": "21212121232"\r\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"update-rules",children:"Update Rules"}),"\n",(0,t.jsxs)(r.p,{children:["Update card block rules using ",(0,t.jsx)(r.code,{children:"/updateCardBlockRules"}),"."]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"Request:"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\r\n  "cardId": 3,\r\n  "countryCodes": [{ "countryAlpha3Code": "ARG", "status": "ACTIVE" }],\r\n  "mcc": [{ "code": "4111", "status": "ACTIVE" }],\r\n  "rrn": "21212121232"\r\n}\r\n```---\r\n\r\n## 6 Channel Preferences\r\n\r\n### Get Preferences\r\n\r\nRetrieve customer channel preferences using `/getCustomerChannelPreferences`.\r\n\r\n**Endpoint:** `GET /getCustomerChannelPreferences/{idValue}/{rrn}`\r\n\r\n### Update Preferences\r\n\r\nUpdate customer channel preferences using `/updateCustomerChannelPreferences`.\r\n\r\n**Request:**\r\n```json\r\n{\r\n  "idType": "CNIC",\r\n  "idValue": "4220142163583",\r\n  "preferences": [\r\n    { "channelCode": "ECOM", "enabled": true }\r\n  ],\r\n  "rrn": "21212121232"\r\n}\r\n```---\r\n\r\n## 7 Card Status\r\n\r\nBlock or re-activate a card using `/setCardStatus`.\r\n\r\n**Request:**\r\n```json\r\n{\r\n  "cardId": 12345,\r\n  "status": "BLOCKED",\r\n  "reason": "Customer request",\r\n  "rrn": "21212121232"\r\n}\r\n```---\r\n\r\n## 8 Error Handling\r\n\r\nAll API failures return a standard error structure.\r\n\r\n**Error Response:**\r\n```json\r\n{\r\n  "responseCode": "99",\r\n  "responseDescription": "Invalid parameter or card not found"\r\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"Refer to the Response Codes section for complete error mappings."}),"\n",(0,t.jsx)(r.h2,{id:"workflow-summary",children:"Workflow Summary"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Step"}),(0,t.jsx)(r.th,{children:"Description"}),(0,t.jsx)(r.th,{children:"Example"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"1"}),(0,t.jsx)(r.td,{children:"Obtain token"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/v1/authenticate"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"2"}),(0,t.jsx)(r.td,{children:"Create/activate card"}),(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"/api/v1/Card/create"}),", ",(0,t.jsx)(r.code,{children:"/activateCard"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"3"}),(0,t.jsx)(r.td,{children:"Fetch details"}),(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"/getCardsByCustomer"}),", ",(0,t.jsx)(r.code,{children:"/getCardDetails"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"4"}),(0,t.jsx)(r.td,{children:"Configure limits"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/setCustomerCardLimits"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"5"}),(0,t.jsx)(r.td,{children:"Apply restrictions"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/updateCardBlockRules"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"6"}),(0,t.jsx)(r.td,{children:"Manage preferences"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/updateCustomerChannelPreferences"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"7"}),(0,t.jsx)(r.td,{children:"Manage status"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/setCardStatus"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"8"}),(0,t.jsx)(r.td,{children:"Handle errors"}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"responseCode + responseDescription"})})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>a});var s=n(6540);const t={},d=s.createContext(t);function c(e){const r=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(d.Provider,{value:r},e.children)}}}]);